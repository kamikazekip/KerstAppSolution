"use strict";var ServerDate=function(a){function k(){return this?k:k.toString()}function l(a,b){this.value=a,this.precision=b}function m(a){var c,b="Set target to "+String(a);i&&(b+=" ("+(a>i?"+":"-")+" "+Math.abs(a-i)+" ms)"),i=a,o(b+"."),c=Math.abs(i-h),c>k.amortizationThreshold&&(o("Difference between target and offset too high ("+c+" ms); skipping amortization."),h=i)}function n(){function f(){var a=new XMLHttpRequest;a.open("GET",d+"?noCache="+Date.now()),a.onreadystatechange=function(){this.readyState==this.HEADERS_RECEIVED&&200==this.status&&(c=Date.now())},a.onload=function(){if(200==this.status)try{g(new Date(this.getResponseHeader("Date")).getTime())}catch(a){o("Unable to read the server's response.")}},b=Date.now(),a.send()}function g(d){var g=(c-b)/2,h=new l(d+g-c,g);o("sample: "+a+", offset: "+String(h)),(1==a||g<=e.precision)&&(e=h),a<10?(a++,f()):(m(e),j=!1)}var b,c,e,a=1;j||(j=!0,setTimeout(function(){j=!1},1e4),f())}function o(a){console&&console.log&&console.log("[ServerDate] "+a)}var e,f,g,h,b=Date.now(),c=document.getElementsByTagName("script"),d=c[c.length-1].src,i=null,j=!1;return k.parse=Date.parse,k.UTC=Date.UTC,k.now=function(){return Date.now()+h},["toString","toDateString","toTimeString","toLocaleString","toLocaleDateString","toLocaleTimeString","valueOf","getTime","getFullYear","getUTCFullYear","getMonth","getUTCMonth","getDate","getUTCDate","getDay","getUTCDay","getHours","getUTCHours","getMinutes","getUTCMinutes","getSeconds","getUTCSeconds","getMilliseconds","getUTCMilliseconds","getTimezoneOffset","toUTCString","toISOString","toJSON"].forEach(function(a){k[a]=function(){return new Date(k.now())[a]()}}),k.getPrecision=function(){if("undefined"!=typeof i.precision)return i.precision+Math.abs(i-h)},k.amortizationRate=25,k.amortizationThreshold=2e3,Object.defineProperty(k,"synchronizationIntervalDelay",{get:function(){return e},set:function(a){e=a,clearInterval(f),f=setInterval(n,k.synchronizationIntervalDelay),o("Set synchronizationIntervalDelay to "+a+" ms.")}}),k.synchronizationIntervalDelay=36e5,l.prototype.valueOf=function(){return this.value},l.prototype.toString=function(){return this.value+("undefined"!=typeof this.precision?" +/- "+this.precision:"")+" ms"},h=a-b,"undefined"!=typeof performance&&(g=(b-performance.timing.domLoading)/2,h+=g),m(new l(h,g)),setInterval(function(){var a=Math.max(-k.amortizationRate,Math.min(k.amortizationRate,i-h));h+=a,a&&o("Offset adjusted by "+a+" ms to "+h+" ms (target: "+i.value+" ms).")},1e3),window.addEventListener("pageshow",n),n(),k}(Date.now());